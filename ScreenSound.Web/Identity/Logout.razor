@page "/logout"
@inject IAuthenticationService AuthService

<PageTitle>Logout</PageTitle>

<AuthorizeView @ref="authView">
    <Authorized>
        <MudProgressCircular Indeterminate="true" Color="Color.Secondary"/>
    </Authorized>
    <NotAuthorized>
        <MudText Typo="Typo.body1" Color="Color.Secondary">Você foi desconectado.</MudText>
        <MudButton Color="Color.Secondary" Variant="Variant.Outlined" Href="login">
            Login
        </MudButton>
    </NotAuthorized>
</AuthorizeView>

@code {
    private AuthorizeView? authView;

    protected override async Task OnInitializedAsync()
    {
        if (await AuthService.CheckAuthenticatedAsync())
        {
            await AuthService.LogoutAsync();
        }
        await base.OnInitializedAsync();
    }

}
